(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{36:function(e,t,a){e.exports=a(67)},40:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),l=a.n(s),o=a(4),c=a(2),u=a(3),i=a(6),p=a(5),m=(a(40),a(9)),h=a(7),d=a.n(h),g=new(function(){function e(){Object(c.a)(this,e),this.auth=d.a.create({baseURL:"https://project3ih.herokuapp.com",withCredentials:!0})}return Object(u.a)(e,[{key:"signup",value:function(e){var t=e.username,a=e.email,n=e.password;return this.auth.post("/auth/signup",{username:t,email:a,password:n}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.email,a=e.password;return this.auth.post("/auth/login",{email:t,password:a}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),f=r.a.createContext(),v=f.Consumer,b=f.Provider,E=function(e){return function(t){Object(i.a)(n,t);var a=Object(p.a)(n);function n(){return Object(c.a)(this,n),a.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(v,null,(function(a){var n=a.login,s=a.signup,l=a.user,o=a.logout,c=a.isLoggedin;return r.a.createElement(e,Object.assign({login:n,signup:s,user:l,logout:o,isLoggedin:c},t.props))}))}}]),n}(n.Component)},x=function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedin:!1,user:null,isLoading:!0,message:""},e.signup=function(t){var a=t.username,n=t.email,r=t.password;g.signup({username:a,email:n,password:r}).then((function(t){return e.setState({isLoggedin:!0,user:t})})).catch((function(t){var a=t.response;e.setState({message:{status:a.status,statusText:a.statusText,errorMessage:a.data.errorMessage}}),console.log(e.state.message)}))},e.login=function(t){var a=t.email,n=t.password;g.login({email:a,password:n}).then((function(t){return e.setState({isLoggedin:!0,user:t})})).catch((function(t){var a=t.response;e.setState({message:{status:a.status,statusText:a.statusText,errorMessage:a.data.errorMessage}}),console.log(e.state.message)}))},e.logout=function(){g.logout().then((function(){return e.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.me().then((function(t){t.email&&e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1,message:t.message})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.isLoggedin!==this.state.isLoggedin&&g.me().then((function(e){e.email&&a.state.isLoggedin&&a.setState({isLoggedin:!0,user:e,isLoading:!1})})).catch((function(e){return a.setState({isLoggedin:!1,user:null,isLoading:!1,message:e.message})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedin,n=e.user,s=this.login,l=this.logout,o=this.signup;return t?r.a.createElement("div",null,"Loading"):r.a.createElement(b,{value:{isLoggedin:a,user:n,login:s,logout:l,signup:o}},this.props.children)}}]),a}(n.Component),j=a(18);var w=E((function(e){var t=e.component,a=e.isLoggedin,n=Object(j.a)(e,["component","isLoggedin"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(m.a,{to:"/"}):r.a.createElement(t,e)}}))}));var O=E((function(e){var t=e.component,a=e.isLoggedin,n=Object(j.a)(e,["component","isLoggedin"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))})),y=E((function(){return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement(o.b,{to:"/profile"},r.a.createElement("li",null,"Perfil")),r.a.createElement(o.b,{to:"/groups"},r.a.createElement("li",null,"Groups")),r.a.createElement(o.b,{to:"/"},r.a.createElement("li",null,"Dashboard")),r.a.createElement(o.b,{to:"/arrangements"},r.a.createElement("li",null,"Arrangements"))))})),k=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.logout,n=e.isLoggedin;return r.a.createElement("nav",{className:"navbar"},r.a.createElement(o.b,{to:"/",id:"home-btn"},r.a.createElement("h4",null,"Home")),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"navbar-user"},"username:",t.username),r.a.createElement("button",{className:"navbar-button",onClick:a},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/login"},r.a.createElement("button",{className:"navbar-button"},"Login")),r.a.createElement("br",null),r.a.createElement(o.b,{to:"/signup"},r.a.createElement("button",{className:"navbar-button"},"Sign Up"))))}}]),a}(n.Component)),C=a(14),S=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.email,s=a.password;e.props.signup({username:n,email:r,password:s}),console.log("Signup -> form submit",{username:n,email:r,password:s})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(C.a)({},n,r))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",value:a,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account?"),r.a.createElement(o.b,{to:"/login"}," Login"))}}]),a}(n.Component)),L=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,r=a.password;e.props.login({email:n,password:r}),console.log("Login -> form submit",{email:n,password:r})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(C.a)({},n,r))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"email:"),r.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),a}(n.Component)),A=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.b,{to:"/profile"},r.a.createElement("li",null,"Perfil")),r.a.createElement("h1",null,"Dashboard"),r.a.createElement("div",{className:"center-div dash-btn"},r.a.createElement(o.b,{to:"/arrangements"},r.a.createElement("button",null,"Arrangements"))),r.a.createElement("div",{className:"center-div dash-btn"},r.a.createElement(o.b,{to:"/groups"},r.a.createElement("button",null,"Groups"))),r.a.createElement(y,null))}}]),a}(n.Component)),T=a(1),G=a.n(T),F=a(8),M=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={checked:!1},e.changeBoolean=Object(F.a)(G.a.mark((function t(){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"PATCH",url:"https://project3ih.herokuapp.com"+"/expenses/edit/".concat(e.props.theExpense._id),withCredentials:!0,data:{payed:e.state.checked}});case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e.deleteExpense=Object(F.a)(G.a.mark((function t(){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"DELETE",url:"https://project3ih.herokuapp.com"+"/expenses/delete/".concat(e.props.theExpense._id),withCredentials:!0});case 3:t.sent,e.props.refreshFunction(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(u.a)(a,[{key:"handleCheckBox",value:function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.changeBoolean();case 2:this.setState({checked:!this.state.checked});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.props.theExpense,"hhh"),r.a.createElement("div",null,r.a.createElement("div",null,this.props.theGroup.members.map((function(t){if(t._id==e.props.theExpense.payer)return r.a.createElement("p",null,t.username)}))),r.a.createElement("p",null," owes "),r.a.createElement("div",null,this.props.theGroup.members.map((function(t){if(t._id==e.props.theExpense.beneficiary)return r.a.createElement("p",null,t.username)}))),r.a.createElement("p",null,this.props.theExpense.expenseImport),r.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleCheckBox(t)},checked:this.state.checked}),r.a.createElement("button",{onClick:this.deleteExpense},"Delete expense"))}}]),a}(n.Component)),P=(a(64),E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={listOfExpenses:[],group:e.props.location.state.groupsList,allImports:[],newArr:[],total:0,sum:0,checked:!0},e.getExpenses=Object(F.a)(G.a.mark((function t(){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"GET",url:"https://project3ih.herokuapp.com"+"/expenses/all/".concat(e.state.group._id),withCredentials:!0});case 3:a=t.sent,e.setState({listOfExpenses:a.data}),console.log(a,"lisFoExpenses"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.getAllExpenses=Object(F.a)(G.a.mark((function t(){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"GET",url:"https://project3ih.herokuapp.com"+"/expenses/add/".concat(e.state.group._id),withCredentials:!0});case 3:a=t.sent,console.log(a,"gjirwgj"),e.setState({listOfExpenses:a.data}),console.log(a,"lisFoExpenses"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.getTotal=function(){e.state.group.costs.map((function(t){e.state.newArr.push(t.costImport)})),e.setState({newArr:e.state.newArr}),console.log(e.state.newArr,"imports"),0==e.state.newArr.length?e.state.sum=0:1==e.state.newArr.length?e.state.sum=e.state.newArr[0]:e.state.newArr.reduce((function(t,a){return e.state.sum=t+a,e.state.sum}))},e.deleteGroup=Object(F.a)(G.a.mark((function t(){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"DELETE",url:"https://project3ih.herokuapp.com"+"/groups/delete/".concat(e.state.group._id),withCredentials:!0});case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getTotal()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("img",{src:this.state.group.image}),r.a.createElement("h1",null,this.state.group.name),r.a.createElement("h1",null,this.state.group.members.length," members"),r.a.createElement(o.b,{to:{pathname:"/groups/addCost/".concat(this.state.group._id),state:{groupsList:this.state.group}}},"Add cost"),r.a.createElement("button",{onClick:this.deleteGroup},"Delete group"),r.a.createElement("div",null,r.a.createElement("h1",null,"Costs list"),this.state.group.costs.map((function(t){return console.log(t,"cada cost"),r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,t.concept),r.a.createElement("h3",null,t.costImport),r.a.createElement("h3",null,t.date),e.state.group.members.map((function(e){if(e._id===t.buyer)return r.a.createElement("h1",null,"Buyer:",e.username)})),r.a.createElement("hr",null))})),r.a.createElement("h1",null,"Total costs:"),this.state.sum,r.a.createElement("hr",null),r.a.createElement("h1",null,"All Expenses"),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.getAllExpenses},"Calcular")),this.state.listOfExpenses.map((function(t){return r.a.createElement("div",null,r.a.createElement(M,{key:t._id,theExpense:t,theGroup:e.state.group,refreshFunction:e.getExpenses}))}))))}}]),a}(n.Component))),_=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={listOfExpenses:[]},e.getAllExpenses=Object(F.a)(G.a.mark((function t(){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"GET",url:"https://project3ih.herokuapp.com/arrangements",withCredentials:!0});case 3:a=t.sent,e.setState({listOfExpenses:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getAllExpenses()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Your debts and incomes"),r.a.createElement("div",null,r.a.createElement("h3",null,"Your debts"),this.state.listOfExpenses.map((function(t){if(t.payer._id.toString()==e.props.user._id.toString())return console.log("cfsfvvv"),r.a.createElement("div",null,t.payer.usermame,r.a.createElement("p",null,"Hola"))}))),r.a.createElement("div",null,r.a.createElement("h3",null,"Your incomes"),this.state.listOfExpenses.map((function(t){if(console.log(t.beneficiary._id.usermame),t.beneficiary._id.toString()==e.props.user._id.toString())return r.a.createElement("div",null,t.payer.username,r.a.createElement("p",null,"owes"),t.beneficiary.username,r.a.createElement("p",null),t.expenseImport,r.a.createElement("p",null,"euros"),r.a.createElement(o.b,{to:{pathname:"/groups/".concat(t.group._id),state:{groupsList:t.group,costs:t.group.costs}}}," ",t.group.name," "),r.a.createElement("br",null))}))))}}]),a}(n.Component)),D=E((function(e){var t=e.groups;return console.log(t,"grups"),r.a.createElement("div",null,r.a.createElement(o.b,{to:{pathname:"/groups/".concat(t._id),state:{groupsList:t}}},r.a.createElement("div",null,r.a.createElement("h3",null,t.name),r.a.createElement("img",{src:t.image,alt:"group pic",width:"100"}),t.members.map((function(e){return r.a.createElement("ul",null,r.a.createElement("li",{key:e._id},e.username))})),r.a.createElement("br",null))))})),I=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={listOfGroups:[]},e.getAllGroups=Object(F.a)(G.a.mark((function t(){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"GET",url:"https://project3ih.herokuapp.com/groups",withCredentials:!0});case 3:a=t.sent,e.setState({listOfGroups:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.createEmptyGroup=function(){var e=Object(F.a)(G.a.mark((function e(t){var a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("hola"),e.prev=2,e.next=5,d()({method:"POST",url:"https://project3ih.herokuapp.com/groups/add",withCredentials:!0});case 5:a=e.sent,window.location="/groups/edit/".concat(a.data._id),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0,"POST expenses error");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getAllGroups()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Your groups"),r.a.createElement("button",{onClick:this.createEmptyGroup},"Create Group"),r.a.createElement("div",null,this.state.listOfGroups.map((function(e){return console.log(e,"cada grup"),r.a.createElement(D,{key:e._id,groups:e})}))))}}]),a}(n.Component)),U=new function e(){var t=this;Object(c.a)(this,e),this.handleFileUpload=function(){var e=Object(F.a)(G.a.mark((function e(a){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("file in service: ",a),e.prev=1,e.next=4,t.service.post("/upload",a);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.service=d.a.create({baseURL:"https://project3ih.herokuapp.com",withCredentials:!0})},N=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userProfile:{}},e.getUserInfo=Object(F.a)(G.a.mark((function t(){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"GET",url:"https://project3ih.herokuapp.com/profile",withCredentials:!0});case 3:a=t.sent,e.setState({userProfile:a.data}),console.log(e.state.userProfile,"hhh"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Your profile"),r.a.createElement("p",null,this.state.userProfile.username),this.state.userProfile.email,r.a.createElement("p",null,"Bizum:",this.state.userProfile.phone),r.a.createElement("img",{src:this.state.userProfile.image}),r.a.createElement(o.b,{to:"/profile-edit/".concat(this.state.userProfile._id),profiles:this.state.userProfile},"Edit profile"))}}]),a}(n.Component)),R=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",image:"",phone:""},e.handleFileUpload=function(){var t=Object(F.a)(G.a.mark((function t(a){var n,r;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("the file to be uploadesd is: ",a.target.files[0]),(n=new FormData).append("image",a.target.files[0]),t.prev=3,t.next=6,U.handleFileUpload(n);case 6:r=t.sent,console.log("response is",r),e.setState({image:r.secure_url}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log("Error while uploading the file: ",t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.editProfile=function(){var e=Object(F.a)(G.a.mark((function e(t,a,n,r){var s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({method:"PATCH",url:"https://project3ih.herokuapp.com"+"/profile/edit/".concat(t),withCredentials:!0,data:{id:t,username:a,image:n,phone:r}});case 3:s=e.sent,console.log(s.data,"resp"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),e.handleFormSubmit=function(){var t=Object(F.a)(G.a.mark((function t(a){var n,r,s,l,o;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n=e.state,r=n.username,s=n.image,l=n.phone,console.log(r,"usern"),o=e.props.user._id,e.editProfile(o,r,s,l);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(C.a)({},n,r))},e}return Object(u.a)(a,[{key:"render",value:function(){return console.log(this.props,"props"),console.log(this.state,"state"),r.a.createElement("div",null,r.a.createElement("h1",null,"Your profile"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",{htmlFor:"username"},"Name:"),r.a.createElement("input",{id:"username",type:"text",name:"username",value:this.username,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"image"}," Image: "),r.a.createElement("input",{id:"image",type:"file",name:"image",onChange:this.handleFileUpload}),r.a.createElement("label",{htmlFor:"phone"},"Edit phone"),r.a.createElement("input",{id:"phone",type:"text",name:"phone",value:this.phone,onChange:this.handleChange}),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Save profile"}))))}}]),a}(n.Component)),z=function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={concept:"",costImport:0,receipt:{},ticket:{merchant:"",items:[]},ocr:!1},e.handleSubmit=function(){var t=Object(F.a)(G.a.mark((function t(a){var n,r,s;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.concept,s=n.costImport,a.preventDefault(),console.log("hola"),t.prev=3,t.next=6,d()({method:"POST",url:"https://project3ih.herokuapp.com"+"/costs/add/".concat(e.props.location.state.groupsList._id),withCredentials:!0,data:{concept:r,costImport:s}});case 6:t.sent,e.setState({concept:"",costImport:0}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0,"POST expenses error");case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.handleFileUpload=function(){var t=Object(F.a)(G.a.mark((function t(a){var n,r,s,l,o,c,u,i;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("the file to be uploadesd is: ",a.target.files[0]),(n=new FormData).append("image",a.target.files[0]),t.prev=3,t.next=6,U.handleFileUpload(n);case 6:return r=t.sent,console.log("response is",r),e.setState({image:r.secure_url}),t.next=11,d()({method:"POST",url:"https://projectemar.cognitiveservices.azure.com/formrecognizer/v2.1-preview.1/prebuilt/receipt/analyze",headers:{"ocp-apim-subscription-key":"283baf18bf244fb599712265b21633c6","content-type":"application/json"},data:{source:r.secure_url}});case 11:s=t.sent,l=!1;case 13:if(l){t.next=23;break}return t.next=16,d()({method:"GET",url:s.headers["operation-location"],headers:{"ocp-apim-subscription-key":"283baf18bf244fb599712265b21633c6","content-type":"application/json"}});case 16:return o=t.sent,t.next=19,e.sleep(.5);case 19:console.log(o.data.status),l="running"!=o.data.status&&"notStarted"!=o.data.status,t.next=13;break;case 23:for(i in console.log(o.data),c={merchant:o.data.analyzeResult.documentResults[0].fields.MerchantName.text,items:[]},o.data.analyzeResult.documentResults[0].fields.Items.valueArray)u=o.data.analyzeResult.documentResults[0].fields.Items.valueArray[i],c.items.push({name:u.valueObject.Name.text,price:u.valueObject.TotalPrice.text});e.setState({ticket:c}),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(3),console.log("Error while uploading the file: ",t.t0);case 32:case"end":return t.stop()}}),t,null,[[3,29]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(C.a)({},n,r))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",null,"Concept:"),r.a.createElement("input",{type:"text",name:"concept",value:this.state.concept,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",null,"Import:"),r.a.createElement("input",{type:"number",name:"costImport",value:this.state.costImport,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Add new beer"})),r.a.createElement("label",{for:"image"}," Image: "),r.a.createElement("input",{type:"file",name:"image",value:"",onChange:function(t){return e.handleFileUpload(t)}}),r.a.createElement("div",null,r.a.createElement("span",null,this.state.ticket.merchant),r.a.createElement("ul",null,this.state.ticket.items.map((function(e){return r.a.createElement("li",null,e.name," - ",e.price)}))))))}}]),a}(n.Component),B=a(35),Y=E(function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(C.a)({},n,r)),e.props.filterMembers(r)},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"input search-bar",name:"search",placeholder:"Search",value:this.state.search,onChange:this.handleChange}))}}]),a}(n.Component)),H=function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={name:"",image:"",members:[],filterMembers:[],theMembers:[]},e.getAllMembers=Object(F.a)(G.a.mark((function t(){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()({method:"GET",url:"https://project3ih.herokuapp.com/profile/allusers",withCredentials:!0});case 3:a=t.sent,e.setState({members:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0,"GET expenses error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.handleFileUpload=function(){var t=Object(F.a)(G.a.mark((function t(a){var n,r;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("the file to be uploadesd is: ",a.target.files[0]),(n=new FormData).append("image",a.target.files[0]),t.prev=3,t.next=6,U.handleFileUpload(n);case 6:r=t.sent,console.log("response is",r),e.setState({image:r.secure_url}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log("Error while uploading the file: ",t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.filterMembers=function(t){var a=t.toLowerCase(),n=Object(B.a)(e.state.members).filter((function(e){return e.username.toLowerCase().includes(a)}));t?e.setState({filterMembers:n}):e.setState({filterMembers:[]}),console.log(e.state.filterMembers,"filter")},e.memberPush=function(){e.state.theMembers.push(e.state.filterMembers[0]),e.setState({theMembers:e.state.theMembers,filterMembers:[]}),console.log(e.state.theMembers,"jgrni9gjr")},e.handleSubmit=function(){var t=Object(F.a)(G.a.mark((function t(a){var n,r,s,l,o,c;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.name,s=n.theMembers,l=n.image,o=e.props.match.params,a.preventDefault(),console.log("hola"),t.prev=4,t.next=7,d()({method:"PATCH",url:"https://project3ih.herokuapp.com"+"/groups/edit/".concat(o.id),withCredentials:!0,data:{name:r,members:s,image:l}});case 7:c=t.sent,console.log(c),e.setState({name:e.state.name,image:e.state.image,members:[]}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0,"POST expenses error");case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(C.a)({},n,r))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getAllMembers()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Create your group"),r.a.createElement("h3",null,"Select the members of your group:"),r.a.createElement("br",null),r.a.createElement(Y,{filterMembers:this.filterMembers}),this.state.filterMembers.map((function(t){return r.a.createElement("div",null,t.username,r.a.createElement("button",{onClick:e.memberPush,id:"show-all"},"Add member"))})),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Group's name:"),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"image"},"Group's image: "),r.a.createElement("input",{type:"file",name:"image",value:"",onChange:this.handleFileUpload})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Save group"}))))}}]),a}(n.Component),J=function(e){Object(i.a)(a,e);var t=Object(p.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(x,null,r.a.createElement("div",{className:"container"},r.a.createElement(k,null),r.a.createElement(m.d,null,r.a.createElement(O,{exact:!0,path:"/",component:A}),r.a.createElement(O,{exact:!0,path:"/arrangements",component:_}),r.a.createElement(O,{exact:!0,path:"/profile",component:N}),r.a.createElement(O,{exact:!0,path:"/profile-edit/:id",component:R}),r.a.createElement(O,{exact:!0,path:"/groups",component:I}),r.a.createElement(O,{exact:!0,path:"/groups/edit/:id",component:H}),r.a.createElement(O,{exact:!0,path:"/groups/addCost/:id",component:z}),r.a.createElement(O,{exact:!0,path:"/groups/:id",component:P}),r.a.createElement(w,{exact:!0,path:"/signup",component:S}),r.a.createElement(w,{exact:!0,path:"/login",component:L}))))}}]),a}(n.Component);l.a.render(r.a.createElement(o.a,null,r.a.createElement(J,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.d385e738.chunk.js.map